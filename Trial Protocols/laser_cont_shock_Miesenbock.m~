function exp = laser_cont_shock_Miesenbock(exp)
   
	laserDistribution = exp.protocolArgs{1};
	laserParams       = exp.protocolArgs{2};

    exp.laserDistribution = laserDistribution;
    exp.laserParams       = laserParams;
    exp.preLEpochs   = [2];
    exp.preREpochs   = [4];
	exp.shockLEpochs  =  [6,10];
	exp.shockREpochs  =  [8,12];
	exp.postLEpochs  =  [14];
	exp.postREpochs  =  [16];
  
    setLaserOff = {@setLaserDistribution,{@laserOff,[]}};
    setLaserL   = {@setLaserDistribution,{laserDistribution,[laserParams(1), laserParams(2)]}};
    setLaserR   = {@setLaserDistribution,{laserDistribution,[laserParams(2), laserParams(1)]}};

	setShockOff  = {@sendToShockController,{0,0}};
	setShockL  =   {@sendToShockController,{0,1}};
	setShockR  =   {@sendToShockController,{0,2}};
    
% Times in minutes
    exp.protocolDesign = {...
        % Time (min), Odor left, odor right, laser left, laser right
[   0, setLaserOff];...
[   1, setLaserL];...
[   3, setLaserOff];...
[   5, setLaserR];...
[   7, setLaserOff];...
[   9, [setLaserL,setShockL]];...
[  10, [setLaserOff,setShockOff]];...
[  11, [setLaserR,setShockR]];...
[  12, [setLaserOff,setShockOff]];...
[  14, [setLaserL,setShockL]];...
[  15, [setLaserOff,setShockOff]];...
[  16, [setLaserR,setShockR]];...
[  17, [setLaserOff,setShockOff]];...
[  22, setLaserL];...
[  24, setLaserOff];...
[  26, setLaserR];...
[  28, setLaserOff];...

};

    exp.nEpochs = size(exp.protocolDesign,1)-1;


